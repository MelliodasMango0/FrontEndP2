<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Interface</title>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.3/lib/p5.min.js"></script>
</head>
<body>
    <script>
        let button;
        let permissionGranted = false;
        let cx, cy;                        // Position of the circle
        let velocityX = 0, velocityY = 0; // Simulated velocity

        let particles = []

        function setup() {
        createCanvas(windowWidth, windowHeight);
        background(0);
        
        cx = width / 2;
        cy = height / 2;

        if (typeof(DeviceOrientationEvent) !== 'undefined' && typeof(DeviceOrientationEvent.requestPermission) == 'function') {
            DeviceOrientationEvent.requestPermission()
            .catch(() => {
                button = createButton("Click to allow access to sensors");
                button.style("font-size", "24px");
                button.center();
                button.mousePressed(requestAccess);
                throw new Error("Permission required");
            })
            .then(() => {
                permissionGranted = true;
            });
        } else {
            permissionGranted = true;
        }
        }

        function requestAccess() {
        DeviceOrientationEvent.requestPermission()
            .then(response => {
            permissionGranted = response === 'granted';
            })
            .catch(console.error);
        button.remove();
        }

        function draw() {
        if (!permissionGranted) return;
        
        const dx = constrain(rotationY, -10, 10);
        const dy = constrain(rotationX, -10, 10);
        cx += dx * 100;
        cy += dy * 100;
        cx = constrain(cx, 0, width);
        cy = constrain(cy, 0, height);
        
        background(0, 32);
        noStroke()
        fill(255);
        circle(cx, cy, 50);
        for (let i = 0; i < particles.length; i++){
            particles[i].update(cx,cy);
            particles[i].show();
        }
        }

        class Particle {
        
        constructor(){
            this.x = 300;
            this.y = 380;
            this.vx = random(-1,1);
            this.vy = random(-5, -1);
        }
        
        update(vx, vy){
            this.x += vx;
            this.y += vy;
        }
        
        show(){ 
            stroke(255);
            fill(255,0)
            ellipse(this.x, this.y, 50)
        }
        
        }
    </script>
</body>
</html>
